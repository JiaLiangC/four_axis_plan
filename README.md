四旋翼飞行器是一种结构新颖、性能优越的垂直起降飞行器，具有操作灵活、带负载能力强等特点，具有重要的军事和民用价值，以及研究价值。在深入了解四旋翼飞行器的研究现状、关键技术与应用前景的基础之上，根据四旋翼飞行器飞行原理，建立系统动力学模型，确定了系统组成和总体设计方案。
很早之前就想做四轴了，一直觉得四轴很难，无从下手，直到这次毕业设计时才下定决心准备从一个四轴小白开始DIY一个属于自己的四轴。                             DIY一样东西之前首先要有浓厚的兴趣，嘿嘿，这样我们才有持续钻研下去的动力么~ 那就让我们看看四轴到底有哪些有趣的地方了吧。
首先假设我们一开始历尽千辛外苦，九九八十一难终于DIY出一架可以稳定飞行的四轴，那么首先我们可以把它当作一架酷炫的遥控“UFO”啊，想象下当带着你自己包装过的外表狂拽酷炫吊炸天的机架飞上天空，先不提遥控飞行带来的快感，光是看看围观小伙伴的好奇羡慕也是很爽的吧，哈哈。    当然给自己孩子做这么一件充满科技气息的小玩意儿也是很不错哦，嗯实现基本飞行后我们还可以用它来完成更多有趣的功能，比如说国外某爸做了一架四轴来护送自己的儿子上学！这架忠实的“老伙计”会在他儿子上空紧跟着并且把实时的视频传回家里，儿子的安危尽在掌握~       在外出旅游时，我们还可以用四轴挂载摄像机来从高空俯拍美景，甚至录制属于自己的纪录片，相当带劲啊！       

再比如在给四轴飞控系统中加入OPENCV的各种算法后可以实现人脸识别的四轴啊，并且识别你的动作用身体动作来指挥四轴飞行，可以避障，可以追踪等等有意思的功能随你DIY，再高深点做一个飞行的四轴机器人如何~ 只要发挥你的想象力，四轴能为你带来超乎寻常的乐趣！
说了那么多说下我这个小白的四轴吧，目前四轴已基本实现平稳飞行，还是有点小飘，等我在折腾下再拿出来见过各位客官O(∩_∩)O  。下个阶段俺准备用树莓派2做一款挂个摄像头，用OPENCV计算机视觉库实现四轴解析人的动作实现各种有趣的功能。。。
下面我将分几个篇章从硬件到软件分享我做四轴的经验。
废话不多说了，首先介绍下四轴飞行器的原理，只有知道它是如何实现各个方向的飞行咋才方便想办法去控制它。（写给和我一样的小白看的，大神们略过）。

![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG697.jpeg '描述')

四旋翼飞行器四个电机上的螺旋桨是对角线的一对顺时针旋转，另一对角线的螺旋桨逆时针旋转。有人要问啊为啥这么麻烦啊都弄成一个方向旋转多省事啊？ 之所以两对桨的旋转方向相反是因为螺旋桨顺着一个方向旋转时会产生反方向的扭矩使机体旋转，所以一对顺指针旋转，一对逆时针旋转，产生的反向扭矩可以互相抵消，就不会造成机体旋转了。接下来是一段摘自网上的四轴飞行器的运动原理，说的很详细，就直接拿来用了 。
四旋翼飞行器通过调节四个电机转速来改变旋翼转速，实现升力的变化，从而控制飞行器的姿态和位置。四旋翼飞行器是一种六自由度的垂直升降机，但只有四个输入力，同时却有六个状态输出，所以它又是一种欠驱动系统。
![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG75.jpeg '描述')
![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG76.jpeg '描述')


四旋翼飞行器的电机 1和电机 3逆时针旋转的同时，电机 2和电机 4顺时针旋转，因此当飞行器平衡飞行时，陀螺效应和空气动力扭矩效应均被抵消。
在上图中，电机 1和电机 3作逆时针旋转，电机 2和电机 4作顺时针旋转，规定沿 x轴正方向运动称为向前运动，箭头在旋翼的运动平面上方表示此电机转速提高，在下方表示此电机转速下降。
（1）垂直运动：同时增加四个电机的输出功率，旋翼转速增加使得总的拉力增大，当总拉力足以克服整机的重量时，四旋翼飞行器便离地垂直上升；反之，同时减小四个电机的输出功率，四旋翼飞行器则垂直下降，直至平衡落地，实现了沿 z轴的垂直运动。当外界扰动量为零时，在旋翼产生的升力等于飞行器的自重时，飞行器便保持悬停状态。
（2）俯仰运动：在图（b）中，电机 1的转速上升，电机 3 的转速下降（改变量大小应相等），电机 2、电机 4 的转速保持不变。由于旋翼1 的升力上升，旋翼 3 的升力下降，产生的不平衡力矩使机身绕 y 轴旋转，同理，当电机 1 的转速下降，电机 3的转速上升，机身便绕y轴向另一个方向旋转，实现飞行器的俯仰运动。
（3）滚转运动：与图 b 的原理相同，在图 c 中，改变电机 2和电机 4的转速，保持电机1和电机 3的转速不变，则可使机身绕 x 轴旋转（正向和反向），实现飞行器的滚转运动。
（4）偏航运动：旋翼转动过程中由于空气阻力作用会形成与转动方向相反的反扭矩，为了克服反扭矩影响，可使四个旋翼中的两个正转，两个反转，且对角线上的各个旋翼转动方向相同。反扭矩的大小与旋翼转速有关，当四个电机转速相同时，四个旋翼产生的反扭矩相互平衡，四旋翼飞行器不发生转动；当四个电机转速不完全相同时，不平衡的反扭矩会引起四旋翼飞行器转动。在图 d中，当电机 1和电机 3 的转速上升，电机 2 和电机 4 的转速下降时，旋翼 1和旋翼3对机身的反扭矩大于旋翼2和旋翼4对机身的反扭矩，机身便在富余反扭矩的作用下绕 z轴转动，实现飞行器的偏航运动，转向与电机 1、电机3的转向相反。
（5）前后运动：要想实现飞行器在水平面内前后、左右的运动，必须在水平面内对飞行器施加一定的力。在图 e中，增加电机 3转速，使拉力增大，相应减小电机 1转速，使拉力减小，同时保持其它两个电机转速不变，反扭矩仍然要保持平衡。按图 b的理论，飞行器首先发生一定程度的倾斜，从而使旋翼拉力产生水平分量，因此可以实现飞行器的前飞运动。向后飞行与向前飞行正好相反。（在图 b 图 c中，飞行器在产生俯仰、翻滚运动的同时也会产生沿 x、y轴的水平运动。）
（6）倾向运动：在图 f 中，由于结构对称，所以倾向飞行的工作原理与前后运动完全一样。
长篇大论介绍完四轴的基本原理后开始上正菜了，让我们从四轴的选材开始。
首先是机架，我一开始选的F450的这种材料的机架
 ![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG78.jpeg '描述')

这种材料的机架炸鸡后机架及其容易损伤，各种容易缺胳膊断腿，而且这个机架刚性不好振动太大，自重也太大。一开始玩的时候不了解买了个才知道坑。机架首推碳纤维杆的机架，碳纤维就不多说了吧，质量及轻，不论刚性还是硬度，都是制作四轴机架的上上之选，土豪或者为了方便可以直接某宝买成品，当然DIYer们可不能放过这么一个好机会来自己动手组个机架，省钱还体验了动手的乐趣，制作过程也及其简单，制作过程可以参考以下两篇连接
http://bbs.5imx.com/bbs/forum.php?mod=viewthread&tid=793392&highlight=%CB%C4%D6%E1%2B%C8%A6&page=1
http://bbs.5imx.com/bbs/forum.php?mod=viewthread&tid=312846&page=1
制作好了机架我们再探探脚架的事情，下图的脚架是我一开始使用的脚架，下面就说下这种脚架的使用体验吧，
 
 ![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG79.jpeg '描述')

这种脚架装在四轴上看着是很美观，但是如果你遥控飞行的技术不是很好，不能平稳降落，亦或是自己DIY四轴时会有很多四轴直接摔下来的情况，那么这种脚架对你四轴的保护性能不是很好，这种脚架太硬，对于四轴没有缓冲，导致四轴摔下来时很容易侧翻然后么，嘿嘿，然后么，如果没有桨保护圈，那你的螺旋桨和电机就要爽歪歪了，具体怎么个爽法，自己脑补去~  其次这种脚架比较重，所以结论就是除非是像我一样一开始无知的新手，否则还是不要用的好，说了这么多废话那么该用什么样的脚架呢，嘿嘿，这个我个人很喜欢用来包仪器的那种泡沫啊，大家都说没图说JB啊，恩恩，上个图看看，直接用的泡沫没怎么加工，比较丑，各位看官莫要嫌弃啊，当然欢迎提出好的建议O(∩_∩)O~
 ![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG80.jpeg '描述')


在泡沫上挖了槽，把机臂嵌了进去，然后用一截细电线绑一圈，非常结实，这个泡沫首先及其轻，材料好找，卖电器的地方都是这种泡沫包装电器的，其次拿来就可以直接用，很方便，当然多才艺的小伙伴们可以按照自己的想象力加工下~ 这种泡沫机架最大好处就是减震性非常好啊，我在PID算法的调试阶段飞机各种摔啊，但有这个脚架，愣是没怎么损伤，螺旋桨都没打坏几支，飞机也较少侧翻，在四轴的实验阶段使用这个泡沫脚架是很不错的选择，可以减少你的损失，但是当你四轴调试的很稳定了，考虑到这个四轴整体的美观性，你就可以换你想要的各种COOL的脚架了，当然用做四轴机架剩下的碳纤维管DIY一个脚架无疑是一个很好的选择，前提是你的四轴稳定后。
接下来说说这个分线板的事啊，淘宝上自然有卖分线板的，但作为偶以为自己动手用洞洞板焊接一个无疑会更好，裁剪一块5厘米见方的洞洞板，然后按图在上面涂焊锡，哈哈，内圈外圈两个长方形分别是负极和正极，这两个导体框最好焊锡涂的够粗够厚，方便更好的承载电池的大电流通过么，焊接好后就把四个电调分别焊接在内外圈的导线上就好，还有电池，粗略的画了个图如下
 ![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG81.jpeg '描述')

那几个凸出的黑点就是电调和电池在这个洞洞板导线框上的焊点，那个电调还有电池的导线弯曲成半圆的地方就是跨过那个导线，和那个导线没有电气连接的意思，有连接的都是黑点表示（相信大部分人都懂吧）。那四个小长方形表示电调，我自己焊接好的洞洞板如图，我的第二个机架是铝方管的，稳定性和耐炸性也不错。
 ![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG82.jpeg '描述')

表告诉我没烙铁焊锡洞洞板啊，烙铁焊锡等工具还有焊接的技巧这些玩四轴必备的条件，我默认各位看官都已经具备哈。
说完了洞洞板的事情，咋们再谈谈电调的事啊，电调啊我买的是好赢20A 的电调，电调选型么那么大讲究，但是你要是想刷Blheli固件的话，建议好赢的电调啦，因为好赢的电调刷起来简单啊。电调刷Blheli的固件
这个网上很多教程，我就给大家来点网上没有的哈，咋们给电调刷最新版的Blheli 13.1版本的固件，
http://www.mxkong.com/thread-1269-1-1.html
大部分步骤都和上面这个网址中网友的步骤相同，不同的是首先下载最新版的Blheli工具网址如下
http://www.helifreak.com/blog.php?bt=3021
下载好后按照上面那个网友那个步骤用arduino制作好下载器，注意那3个探针很难同时触到电调内部的那三个白色黑色红色标注的焊盘上，
 ![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG83.jpeg '描述')

我就遇到过这个问题，用3个插针碰触到那2个焊点后无论如何都不能连接到电调，最后把电调的地线就是给接收机供电那个插槽的地线直接插到了arduino下载器的GND上，然后只要保证探针和白色红色焊盘接触上，这样就容易多了，问题顿时解决，顺利连接电调。
还有最新版的BLheli和其他版本的不同操作之处，这里指出Blheli工具显示串口的设置，默认打开该工具后都不显示串口，导致无法和arduino下载器连接，如下：
其他都和刷老版本一样，注意在Atmel/Silabs选项中选择Sialabs serial interface选项（如果你用的arduino 最小系统板子做的下载器的话）如图就在菜单
栏第一排第三个选项
 ![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG84.jpeg '描述')

这样该工具底部就会显示出串口，双击该串口选择你的arduino下载器对应的串口。
那么刷了这个电调后怎么设置这个电调呢，上电后的电调提示音都是什么意思呢，遥控器怎么设置电调呢，嘿嘿，看图
 ![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG85.jpeg '描述')

看到没Blheli info选项的 manuals子菜单中有blheli所有版本固件的说明文档，咋们只看自己刷的固件版本对应的文档就好，我刷的是13.1版本固件，截止写这篇文章时固件更新到了13.2，不过操作都一样。
刷了这个固件后发生了很大变化，首先这个飞控电调都上电后要先解锁电调（每次上电都要解锁），居然要解锁电调。。。这点坑死我了，辛亏看了那个文档，这是说明文档的步骤

 ![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG86.jpeg '描述')

               对于不喜欢看英文文档的同学我简单总结如下
{
飞机通电前控的油门摇杆应处于最低位，微调归零，接通飞机电池。听到3声“哆来咪”短音
然后推油门（小推即可，不要到顶），然后听到1声长低音
再把油门拉到底（0油门），然后再听到1声长高音
此时电调初始化就绪，可以开始给油门启动
}
至此刷Blheli固件完成，听无刷电机声音，以及连续变速时，明显比原厂固件平滑，响应更快。
如果大家发现电机干脆不转，那么改动你输出到电调的PWM信号频率试试

 ![](http://7xsr0z.com2.z0.glb.clouddn.com/WechatIMG87.jpeg '描述')
 
看到没说明手册上详细说明了改固件支持的PWM频率范围，看不清的按照上面步骤打开说明文档自己看，如果你的50HZ或者500HZ的PWM输出电机无反应的话，那么该2K的PWM输出试试。
电调也说完了，剩下的电机选型和螺旋桨搭配这个我不怎么懂，直接在网上搜的配置我用的朗宇2212配1047的仿APC桨，
个人觉得啊这个仿APC桨是个好东西便宜好用，千万别买塑料桨啊，飞机稳定了，有多余的钱的话直接用碳纤维的桨~还有飓风的电机也不错推荐给大家使用。飓风的2216 2212电机配450机架都不错。
需要注意的地方是子弹头一定要拧紧不然会射桨滴，哈哈，我会说我就被飞出的螺旋桨击中过一次！
拧紧螺旋桨啊，这个推荐给大家个姿势，自从用了这个方法腰不酸了，腿不痛了，老眼也不昏花了~扯远了
是这样滴首先找一个自行车辐条，找不到去修自行车的地方买一根，然后先手动拧住子弹头，拧不动后，把辐条插入子弹头的孔，另一个手抓住螺旋桨的根部，抓紧，然后继续用辐条拧子弹头就好，直到拧不动为止。我不会告诉你即使不用螺丝胶我也再没射过~ 嘿嘿
先到这，挤出时间接着写。

至于调度算法，姿态解调算法，滤波算法（卡尔曼滤波），飞行姿态稳定（位置pid,串级pid）调整算法 下回分解


